<div class="article-entry" itemprop="articleBody">

<h1 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1. æ¦‚è¿°"></a>1. æ¦‚è¿°</h1><p>æœ¬æ–‡ï¼Œæˆ‘ä»¬æ¥è¡¥å…… <a href="http://svip.iocoder.cn/Spring-Boot/SpringApplication">ã€Šç²¾å°½ Spring Boot æºç åˆ†æ â€”â€” SpringApplicationã€‹</a> æ–‡ç« ï¼Œå¹¶æœªè¯¦ç»†è§£æçš„ ApplicationContextInitializer ã€‚</p>
<h1 id="2-ApplicationContextInitializer"><a href="#2-ApplicationContextInitializer" class="headerlink" title="2. ApplicationContextInitializer"></a>2. ApplicationContextInitializer</h1><p><code>org.springframework.context.ApplicationContextInitializer</code> ï¼ŒApplicationContext åˆå§‹åŒ–æ¥å£ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Callback interface for initializing a Spring {<span class="doctag">@link</span> ConfigurableApplicationContext}</span></span><br><span class="line"><span class="comment"> * prior to being {<span class="doctag">@linkplain</span> ConfigurableApplicationContext#refresh() refreshed}.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;Typically used within web applications that require some programmatic initialization</span></span><br><span class="line"><span class="comment"> * of the application context. For example, registering property sources or activating</span></span><br><span class="line"><span class="comment"> * profiles against the {<span class="doctag">@linkplain</span> ConfigurableApplicationContext#getEnvironment()</span></span><br><span class="line"><span class="comment"> * context's environment}. See {<span class="doctag">@code</span> ContextLoader} and {<span class="doctag">@code</span> FrameworkServlet} support</span></span><br><span class="line"><span class="comment"> * for declaring a "contextInitializerClasses" context-param and init-param, respectively.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;{<span class="doctag">@code</span> ApplicationContextInitializer} processors are encouraged to detect</span></span><br><span class="line"><span class="comment"> * whether Spring's {<span class="doctag">@link</span> org.springframework.core.Ordered Ordered} interface has been</span></span><br><span class="line"><span class="comment"> * implemented or if the @{<span class="doctag">@link</span> org.springframework.core.annotation.Order Order}</span></span><br><span class="line"><span class="comment"> * annotation is present and to sort instances accordingly if so prior to invocation.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chris Beams</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 3.1</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;C&gt; the application context type</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> org.springframework.web.context.ContextLoader#customizeContext</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> org.springframework.web.context.ContextLoader#CONTEXT_INITIALIZER_CLASSES_PARAM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> org.springframework.web.servlet.FrameworkServlet#setContextInitializerClasses</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> org.springframework.web.servlet.FrameworkServlet#applyInitializers</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ApplicationContextInitializer</span>&lt;<span class="title">C</span> <span class="keyword">extends</span> <span class="title">ConfigurableApplicationContext</span>&gt; </span>{</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Initialize the given application context.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> applicationContext the application to configure</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">initialize</span><span class="params">(C applicationContext)</span></span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>1ã€ApplicationContextInitializer æ˜¯ Spring Framework 3.1 ç‰ˆæœ¬å¼€å§‹æä¾›çš„æ¥å£ã€‚è€Œæœ¬æ–‡ï¼Œæˆ‘ä»¬æ˜¯æ¥åˆ†äº« Spring Boot ä¸­ï¼Œå‡ ä¸ª ApplicationContextInitializer å®ç°ç±»ã€‚</li>
<li>2ã€ã€ä½œç”¨ã€‘ApplicationContextInitializer æ˜¯ä¸€ä¸ªå›è°ƒæ¥å£ï¼Œç”¨äº Spring ConfigurableApplicationContext å®¹å™¨æ‰§è¡Œ <code>#refresh()</code> æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ä¹‹å‰ï¼Œæå‰èµ°ä¸€äº›è‡ªå®šä¹‰çš„åˆå§‹åŒ–é€»è¾‘ã€‚</li>
<li>3ã€ã€åœºæ™¯ã€‘å®ƒçš„ä½¿ç”¨åœºæ™¯ï¼Œä¾‹å¦‚è¯´ Web åº”ç”¨ä¸­éœ€è¦æ³¨å†Œå±æ€§ï¼Œæˆ–è€…æ¿€æ´» Profiles ã€‚</li>
<li>4ã€ã€æ’åºã€‘å®ƒæ”¯æŒ Spring çš„ Ordered æ¥å£ã€<code>@Order</code> æ³¨è§£ï¼Œæ¥å¯¹å¤šä¸ª ApplicationContextInitializer å®ä¾‹è¿›è¡Œæ’åºï¼Œä»è€Œå®ç°ï¼ŒApplicationContextInitializer æŒ‰ç…§é¡ºåºè°ƒç”¨ <code>#initialize(C applicationContext)</code> æ–¹æ³•ï¼Œè¿›è¡Œåˆå§‹åŒ–ã€‚</li>
</ul>
<h1 id="3-SpringApplication-ä¸­çš„ä½¿ç”¨"><a href="#3-SpringApplication-ä¸­çš„ä½¿ç”¨" class="headerlink" title="3. SpringApplication ä¸­çš„ä½¿ç”¨"></a>3. SpringApplication ä¸­çš„ä½¿ç”¨</h1><h2 id="3-1-åˆå§‹åŒ–-ApplicationContextInitializer-é›†åˆ"><a href="#3-1-åˆå§‹åŒ–-ApplicationContextInitializer-é›†åˆ" class="headerlink" title="3.1 åˆå§‹åŒ– ApplicationContextInitializer é›†åˆ"></a>3.1 åˆå§‹åŒ– ApplicationContextInitializer é›†åˆ</h2><p>åœ¨ SpringApplication æ„é€ æ–¹æ³•ä¸­ï¼Œä¼šè°ƒç”¨ <code>#getSpringFactoriesInstances(Class&lt;T&gt; type)</code> æ–¹æ³•ï¼Œè·å¾— ApplicationContextInitializer é›†åˆã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// SpringApplication.java</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> &lt;T&gt; <span class="function">Collection&lt;T&gt; <span class="title">getSpringFactoriesInstances</span><span class="params">(Class&lt;T&gt; type)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> getSpringFactoriesInstances(type, <span class="keyword">new</span> Class&lt;?&gt;[] {});</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> &lt;T&gt; <span class="function">Collection&lt;T&gt; <span class="title">getSpringFactoriesInstances</span><span class="params">(Class&lt;T&gt; type,</span></span></span><br><span class="line"><span class="function"><span class="params">        Class&lt;?&gt;[] parameterTypes, Object... args)</span> </span>{</span><br><span class="line">    ClassLoader classLoader = getClassLoader();</span><br><span class="line">    <span class="comment">// Use names and ensure unique to protect against duplicates</span></span><br><span class="line">    <span class="comment">// &lt;1&gt; åŠ è½½æŒ‡å®šç±»å‹å¯¹åº”çš„ï¼Œåœ¨ `META-INF/spring.factories` é‡Œçš„ç±»åçš„æ•°ç»„</span></span><br><span class="line">    Set&lt;String&gt; names = <span class="keyword">new</span> LinkedHashSet&lt;&gt;(SpringFactoriesLoader.loadFactoryNames(type, classLoader));</span><br><span class="line">    <span class="comment">// &lt;2&gt; åˆ›å»ºå¯¹è±¡ä»¬</span></span><br><span class="line">    List&lt;T&gt; instances = createSpringFactoriesInstances(type, parameterTypes, classLoader, args, names);</span><br><span class="line">    <span class="comment">// &lt;3&gt; æ’åºå¯¹è±¡ä»¬</span></span><br><span class="line">    AnnotationAwareOrderComparator.sort(instances);</span><br><span class="line">    <span class="keyword">return</span> instances;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li><code>&lt;1&gt;</code> å¤„ï¼ŒåŠ è½½æŒ‡å®š ApplicationContextInitializer ç±»å‹å¯¹åº”çš„ï¼Œåœ¨ <code>META-INF/spring.factories</code> é‡Œçš„ç±»åçš„æ•°ç»„ã€‚<ul>
<li>å‡è®¾åªåœ¨ Spring MVC çš„ç¯å¢ƒä¸‹ï¼Œ<code>initializers</code> å±æ€§çš„ç»“æœå¦‚ä¸‹å›¾ï¼š<img src="http://static2.iocoder.cn/images/Spring-Boot/2021-01-07/01.jpg" alt="`initializers` å±æ€§"></li>
<li>è‰¿è‰¿æ•´ç†äº† Spring Boot ä¸­ï¼ŒApplicationContextInitializer çš„å®ç°ç±»ä»¬ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<img src="http://static2.iocoder.cn/images/Spring-Boot/2021-01-22/01.jpg" alt="Spring Boot ApplicationContextInitializer çš„å®ç°ç±»"></li>
</ul>
</li>
<li><code>&lt;2&gt;</code> å¤„ï¼Œåˆ›å»ºå¯¹è±¡ä»¬ã€‚</li>
<li><code>&lt;3&gt;</code> å¤„ï¼Œæ’åºå¯¹è±¡ä»¬ã€‚è¿™ä¸ªå°±æ˜¯åœ¨ <a href="#">ã€Œ2. ApplicationContextInitializerã€</a> æåˆ°çš„ã€æ’åºã€‘ã€‚</li>
</ul>
<h2 id="3-2-prepareContext"><a href="#3-2-prepareContext" class="headerlink" title="3.2 prepareContext"></a>3.2 prepareContext</h2><p>åœ¨ <code>#prepareContext(...)</code> æ–¹æ³•ä¸­ï¼Œå³åœ¨ Spring IoC å®¹å™¨åˆå§‹åŒ–ä¹‹å‰ï¼Œä¼šè°ƒç”¨ <code>#applyInitializers()</code> æ–¹æ³•ï¼Œé€ä¸ªè°ƒç”¨ ApplicationContextInitializer çš„åˆå§‹åŒ–æ–¹æ³•ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// SpringApplication.java</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">applyInitializers</span><span class="params">(ConfigurableApplicationContext context)</span> </span>{</span><br><span class="line">    <span class="comment">// éå† ApplicationContextInitializer æ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span> (ApplicationContextInitializer initializer : getInitializers()) {</span><br><span class="line">        <span class="comment">// æ ¡éªŒ ApplicationContextInitializer çš„æ³›å‹éç©º</span></span><br><span class="line">        Class&lt;?&gt; requiredType = GenericTypeResolver.resolveTypeArgument(initializer.getClass(), ApplicationContextInitializer.class);</span><br><span class="line">        Assert.isInstanceOf(requiredType, context, <span class="string">"Unable to call initializer."</span>);</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ– ApplicationContextInitializer</span></span><br><span class="line">        initializer.initialize(context);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯è°ƒç”¨ <code>ApplicationContextInitializer#initialize(context)</code> æ–¹æ³•ï¼Œè¿›è¡Œåˆå§‹åŒ–ã€‚</li>
</ul>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥é€ä¸ªçœ‹çœ‹ Spring Boot å¯¹ ApplicationContextInitializer çš„å®ç°ç±»ä»¬ã€‚</p>
<h1 id="4-DelegatingApplicationContextInitializer"><a href="#4-DelegatingApplicationContextInitializer" class="headerlink" title="4. DelegatingApplicationContextInitializer"></a>4. DelegatingApplicationContextInitializer</h1><p><code>org.springframework.boot.context.config.DelegatingApplicationContextInitializer</code> ï¼Œå®ç° ApplicationContextInitializerã€Ordered æ¥å£ï¼Œæ ¹æ®ç¯å¢ƒå˜é‡é…ç½®çš„ <code>context.initializer.classes</code> é…ç½®çš„ ApplicationContextInitializer ç±»ä»¬ï¼Œäº¤ç»™å®ƒä»¬è¿›è¡Œåˆå§‹åŒ–ã€‚</p>
<h2 id="4-1-æ„é€ æ–¹æ³•"><a href="#4-1-æ„é€ æ–¹æ³•" class="headerlink" title="4.1 æ„é€ æ–¹æ³•"></a>4.1 æ„é€ æ–¹æ³•</h2><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// DelegatingApplicationContextInitializer.java</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç¯å¢ƒå˜é‡é…ç½®çš„å±æ€§</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String PROPERTY_NAME = <span class="string">"context.initializer.classes"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é»˜è®¤ä¼˜å…ˆçº§</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> order = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ... æ„é€ æ–¹æ³•ä¸ºç©º</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getOrder</span><span class="params">()</span> </span>{</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.order;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>ä¼˜å…ˆçº§ä¸º 0 ï¼Œåœ¨ Spring Boot é»˜è®¤çš„ ApplicationContextInitializer å®ç°ç±»ä¸­ï¼Œæ˜¯æ’åœ¨æœ€å‰é¢çš„ã€‚</li>
</ul>
<h2 id="4-2-initialize"><a href="#4-2-initialize" class="headerlink" title="4.2 initialize"></a>4.2 initialize</h2><p>å®ç° <code>#initialize(ConfigurableApplicationContext context)</code> æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// DelegatingApplicationContextInitializer.java</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initialize</span><span class="params">(ConfigurableApplicationContext context)</span> </span>{</span><br><span class="line">    <span class="comment">// &lt;1&gt; è·å¾—ç¯å¢ƒå˜é‡é…ç½®çš„ ApplicationContextInitializer é›†åˆä»¬</span></span><br><span class="line">    ConfigurableEnvironment environment = context.getEnvironment();</span><br><span class="line">    List&lt;Class&lt;?&gt;&gt; initializerClasses = getInitializerClasses(environment);</span><br><span class="line">    <span class="comment">// å¦‚æœéç©ºï¼Œåˆ™è¿›è¡Œåˆå§‹åŒ–</span></span><br><span class="line">    <span class="keyword">if</span> (!initializerClasses.isEmpty()) {</span><br><span class="line">        applyInitializerClasses(context, initializerClasses);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li><code>&lt;1&gt;</code> å¤„ï¼Œè°ƒç”¨ <code>#getInitializerClasses(ConfigurableEnvironment env)</code> æ–¹æ³•ï¼Œè·å¾—ç¯å¢ƒå˜é‡é…ç½®çš„ ApplicationContextInitializer é›†åˆä»¬ã€‚ä»£ç å¦‚ä¸‹ï¼š  <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// DelegatingApplicationContextInitializer.java</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> List&lt;Class&lt;?&gt;&gt; getInitializerClasses(ConfigurableEnvironment env) {</span><br><span class="line">    <span class="comment">// è·å¾—ç¯å¢ƒå˜é‡é…ç½®çš„å±æ€§</span></span><br><span class="line">    String classNames = env.getProperty(PROPERTY_NAME);</span><br><span class="line">    <span class="comment">// æ‹¼è£…æˆæ•°ç»„ï¼ŒæŒ‰ç…§ ï¼Œåˆ†éš”</span></span><br><span class="line">    List&lt;Class&lt;?&gt;&gt; classes = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.hasLength(classNames)) {</span><br><span class="line">        <span class="keyword">for</span> (String className : StringUtils.tokenizeToStringArray(classNames, <span class="string">","</span>)) {</span><br><span class="line">            classes.add(getInitializerClass(className));</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> classes;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Class&lt;?&gt; getInitializerClass(String className) <span class="keyword">throws</span> LinkageError {</span><br><span class="line">	<span class="keyword">try</span> {</span><br><span class="line">		<span class="comment">// è·å¾—å…¨ç±»åï¼Œå¯¹åº”çš„ç±»</span></span><br><span class="line">		Class&lt;?&gt; initializerClass = ClassUtils.forName(className, ClassUtils.getDefaultClassLoader());</span><br><span class="line">		Assert.isAssignable(ApplicationContextInitializer.class, initializerClass);</span><br><span class="line">		<span class="keyword">return</span> initializerClass;</span><br><span class="line">	} <span class="keyword">catch</span> (ClassNotFoundException ex) {</span><br><span class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> ApplicationContextException(<span class="string">"Failed to load context initializer class ["</span> + className + <span class="string">"]"</span>, ex);</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</li>
</ul>
<ul>
<li><p><code>&lt;2&gt;</code> å¤„ï¼Œè°ƒç”¨ <code>#applyInitializerClasses(ConfigurableApplicationContext context, List&lt;Class&lt;?&gt;&gt; initializerClasses)</code> æ–¹æ³•ï¼Œæ‰§è¡Œåˆå§‹åŒ–ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// DelegatingApplicationContextInitializer.java</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">applyInitializerClasses</span><span class="params">(ConfigurableApplicationContext context, List&lt;Class&lt;?&gt;&gt; initializerClasses)</span> </span>{</span><br><span class="line">    Class&lt;?&gt; contextClass = context.getClass();</span><br><span class="line">    <span class="comment">// éå† initializerClasses æ•°ç»„ï¼Œåˆ›å»ºå¯¹åº”çš„ ApplicationContextInitializer å¯¹è±¡ä»¬ â‘ </span></span><br><span class="line">    List&lt;ApplicationContextInitializer&lt;?&gt;&gt; initializers = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (Class&lt;?&gt; initializerClass : initializerClasses) {</span><br><span class="line">        initializers.add(instantiateInitializer(contextClass, initializerClass));</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// æ‰§è¡Œ ApplicationContextInitializer ä»¬çš„åˆå§‹åŒ–é€»è¾‘ â‘¡</span></span><br><span class="line">    applyInitializers(context, initializers);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¢« â‘  å¤„è°ƒç”¨</span></span><br><span class="line"><span class="keyword">private</span> ApplicationContextInitializer&lt;?&gt; instantiateInitializer(Class&lt;?&gt; contextClass, Class&lt;?&gt; initializerClass) {</span><br><span class="line">    <span class="comment">// æ–­è¨€æ ¡éªŒ</span></span><br><span class="line">    Class&lt;?&gt; requireContextClass = GenericTypeResolver.resolveTypeArgument(initializerClass, ApplicationContextInitializer.class);</span><br><span class="line">    Assert.isAssignable(requireContextClass, contextClass, String.format(</span><br><span class="line">                    <span class="string">"Could not add context initializer [%s]"</span></span><br><span class="line">                            + <span class="string">" as its generic parameter [%s] is not assignable "</span></span><br><span class="line">                            + <span class="string">"from the type of application context used by this "</span></span><br><span class="line">                            + <span class="string">"context loader [%s]: "</span>,</span><br><span class="line">                    initializerClass.getName(), requireContextClass.getName(), contextClass.getName()));</span><br><span class="line">    <span class="comment">// åˆ›å»º ApplicationContextInitializer å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">return</span> (ApplicationContextInitializer&lt;?&gt;) BeanUtils.instantiateClass(initializerClass);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¢« â‘¡ å¤„è°ƒç”¨</span></span><br><span class="line"><span class="meta">@SuppressWarnings</span>({ <span class="string">"unchecked"</span>, <span class="string">"rawtypes"</span> })</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">applyInitializers</span><span class="params">(ConfigurableApplicationContext context, List&lt;ApplicationContextInitializer&lt;?&gt;&gt; initializers)</span> </span>{</span><br><span class="line">    <span class="comment">// æ’åºï¼Œæ— å¤„ä¸åœ¨çš„æ’åºï¼</span></span><br><span class="line">    initializers.sort(<span class="keyword">new</span> AnnotationAwareOrderComparator());</span><br><span class="line">    <span class="comment">// æ‰§è¡Œåˆå§‹åŒ–é€»è¾‘</span></span><br><span class="line">    <span class="keyword">for</span> (ApplicationContextInitializer initializer : initializers) {</span><br><span class="line">        initializer.initialize(context);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>è™½ç„¶ä»£ç æœ‰ç‚¹é•¿ï¼Œä½†æ˜¯ç®€å•çš„ã€‚</li>
</ul>
</li>
</ul>
<h1 id="5-SharedMetadataReaderFactoryContextInitializer"><a href="#5-SharedMetadataReaderFactoryContextInitializer" class="headerlink" title="5. SharedMetadataReaderFactoryContextInitializer"></a>5. SharedMetadataReaderFactoryContextInitializer</h1><p><code>org.springframework.boot.autoconfigure.SharedMetadataReaderFactoryContextInitializer</code> ï¼Œå®ç° ApplicationContextInitializerã€Ordered æ¥å£ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªç”¨äºåœ¨ ConfigurationClassPostProcessor å’Œ Spring Boot é—´å…±äº«çš„ CachingMetadataReaderFactory Bean å¯¹è±¡ã€‚</p>
<p>ç®€åŒ–ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * {<span class="doctag">@link</span> ApplicationContextInitializer} to create a shared</span></span><br><span class="line"><span class="comment"> * {<span class="doctag">@link</span> CachingMetadataReaderFactory} between the</span></span><br><span class="line"><span class="comment"> * {<span class="doctag">@link</span> ConfigurationClassPostProcessor} and Spring Boot.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Phillip Webb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.4.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ›å»ºçš„ CachingMetadataReaderFactory çš„ Bean åå­—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String BEAN_NAME = <span class="string">"org.springframework.boot.autoconfigure."</span></span><br><span class="line">        + <span class="string">"internalCachingMetadataReaderFactory"</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initialize</span><span class="params">(ConfigurableApplicationContext applicationContext)</span> </span>{</span><br><span class="line">    applicationContext.addBeanFactoryPostProcessor(<span class="keyword">new</span> CachingMetadataReaderFactoryPostProcessor());</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getOrder</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// ... çœç•¥ CachingMetadataReaderFactoryPostProcessor å†…éƒ¨ç±»</span></span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>çœ‹ä¸æ‡‚è¿™ä¸ªç±»çš„å…·ä½“ç”¨é€”ï¼Œæš‚æ—¶å…ˆä¸å»æ·±ç©¶ã€‚ğŸ˜ˆ ç­‰çœŸçš„éœ€è¦å®ƒæ—¶ï¼Œå’±ä»¬åœ¨ç»†ç»†çš„æ’¸å®ƒã€‚</li>
</ul>
<h1 id="6-ContextIdApplicationContextInitializer"><a href="#6-ContextIdApplicationContextInitializer" class="headerlink" title="6. ContextIdApplicationContextInitializer"></a>6. ContextIdApplicationContextInitializer</h1><p><code>org.springframework.boot.context.ContextIdApplicationContextInitializer</code> ï¼Œå®ç° ApplicationContextInitializerã€Ordered æ¥å£ï¼Œè´Ÿè´£ç”Ÿæˆ Spring å®¹å™¨çš„ç¼–å·ã€‚</p>
<h2 id="6-1-æ„é€ æ–¹æ³•"><a href="#6-1-æ„é€ æ–¹æ³•" class="headerlink" title="6.1 æ„é€ æ–¹æ³•"></a>6.1 æ„é€ æ–¹æ³•</h2><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ContextIdApplicationContextInitializer.java</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¼˜å…ˆçº§</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> order = Ordered.LOWEST_PRECEDENCE - <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getOrder</span><span class="params">()</span> </span>{</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.order;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="6-2-initialize"><a href="#6-2-initialize" class="headerlink" title="6.2 initialize"></a>6.2 initialize</h2><p>å®ç° <code>#initialize(ConfigurableApplicationContext context)</code> æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ContextIdApplicationContextInitializer.java</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initialize</span><span class="params">(ConfigurableApplicationContext applicationContext)</span> </span>{</span><br><span class="line">    <span class="comment">// &lt;1&gt; è·å¾—ï¼ˆåˆ›å»ºï¼‰ ContextId å¯¹è±¡</span></span><br><span class="line">    ContextId contextId = getContextId(applicationContext);</span><br><span class="line">    <span class="comment">// &lt;2&gt; è®¾ç½®åˆ° applicationContext ä¸­</span></span><br><span class="line">    applicationContext.setId(contextId.getId());</span><br><span class="line">    <span class="comment">// &lt;3&gt; æ³¨å†Œåˆ° contextId åˆ° Spring å®¹å™¨ä¸­</span></span><br><span class="line">    applicationContext.getBeanFactory().registerSingleton(ContextId.class.getName(), contextId);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li><p>ContextId ï¼Œæ˜¯ ContextIdApplicationContextInitializer çš„å†…éƒ¨ç±»ï¼ŒSpring å®¹å™¨ç¼–å·çš„å°è£…ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ContextIdApplicationContextInitializer#ContextId.java</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ContextId</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€’å¢åºåˆ—</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> AtomicLong children = <span class="keyword">new</span> AtomicLong(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç¼–å·</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> String id;</span><br><span class="line"></span><br><span class="line">	ContextId(String id) {</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> åˆ›å»ºå­ Context çš„ç¼–å·</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">	<span class="function">ContextId <span class="title">createChildId</span><span class="params">()</span> </span>{</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> ContextId(<span class="keyword">this</span>.id + <span class="string">"-"</span> + <span class="keyword">this</span>.children.incrementAndGet());</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="function">String <span class="title">getId</span><span class="params">()</span> </span>{</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.id;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p><code>&lt;1&gt;</code> å¤„ï¼Œè°ƒç”¨ <code>#getContextId(ConfigurableApplicationContext applicationContext)</code> æ–¹æ³•ï¼Œè·å¾—ï¼ˆåˆ›å»ºï¼‰ ContextId å¯¹è±¡ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ContextIdApplicationContextInitializer.java</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> ContextId <span class="title">getContextId</span><span class="params">(ConfigurableApplicationContext applicationContext)</span> </span>{</span><br><span class="line">    <span class="comment">// è·å¾—çˆ¶ ApplicationContext å¯¹è±¡</span></span><br><span class="line">    ApplicationContext parent = applicationContext.getParent();</span><br><span class="line">    <span class="comment">// æƒ…å†µä¸€ï¼Œå¦‚æœçˆ¶ ApplicationContext å­˜åœ¨ï¼Œä¸”æœ‰å¯¹åº”çš„ ContextId å¯¹è±¡ï¼Œåˆ™ä½¿ç”¨å®ƒç”Ÿæˆå½“å‰å®¹å™¨çš„ ContextId å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">if</span> (parent != <span class="keyword">null</span> &amp;&amp; parent.containsBean(ContextId.class.getName())) {</span><br><span class="line">        <span class="keyword">return</span> parent.getBean(ContextId.class).createChildId();</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// æƒ…å†µäºŒï¼Œåˆ›å»º ContextId å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ContextId(getApplicationId(applicationContext.getEnvironment()));</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">getApplicationId</span><span class="params">(ConfigurableEnvironment environment)</span> </span>{</span><br><span class="line">    String name = environment.getProperty(<span class="string">"spring.application.name"</span>);</span><br><span class="line">    <span class="keyword">return</span> StringUtils.hasText(name) ? name : <span class="string">"application"</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½¿ç”¨ <code>"spring.application.name"</code> ç¯å¢ƒå˜é‡ï¼Œä½œä¸º ContextId å¯¹è±¡çš„ <code>id</code> å±æ€§ã€‚</li>
</ul>
</li>
<li><p><code>&lt;2&gt;</code> å¤„ï¼Œè®¾ç½®åˆ° <code>applicationContext.id</code> ä¸­ã€‚</p>
</li>
<li><code>&lt;3&gt;</code> å¤„ï¼Œæ³¨å†Œåˆ° <code>contextId</code> åˆ° Spring å®¹å™¨ä¸­ã€‚è¿™æ ·ï¼Œåç»­å°±å¯ä»¥æ‹¿åˆ°äº†ã€‚</li>
</ul>
<h1 id="7-ConfigurationWarningsApplicationContextInitializer"><a href="#7-ConfigurationWarningsApplicationContextInitializer" class="headerlink" title="7. ConfigurationWarningsApplicationContextInitializer"></a>7. ConfigurationWarningsApplicationContextInitializer</h1><blockquote>
<p>è‰¿è‰¿ï¼šå¯¹äºè¿™ä¸ªç±»ï¼Œé€‰æ‹©æ€§äº†è§£å³å¯ã€‚</p>
</blockquote>
<p><code>org.springframework.boot.context.ConfigurationWarningsApplicationContextInitializer</code> ï¼Œå®ç° ApplicationContextInitializer æ¥å£ï¼Œç”¨äºæ£€æŸ¥é…ç½®ï¼ŒæŠ¥å‘Šé”™è¯¯çš„é…ç½®ã€‚å¦‚ä¸‹æ˜¯å…¶ç±»ä¸Šçš„æ³¨é‡Šï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * {<span class="doctag">@link</span> ApplicationContextInitializer} to report warnings for common misconfiguration mistakes.</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></tbody></table></figure>
<h2 id="7-1-initialize"><a href="#7-1-initialize" class="headerlink" title="7.1 initialize"></a>7.1 initialize</h2><p>å®ç° <code>#initialize(ConfigurableApplicationContext applicationContext)</code> æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ConfigurationWarningsApplicationContextInitializer.java</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initialize</span><span class="params">(ConfigurableApplicationContext context)</span> </span>{</span><br><span class="line">	<span class="comment">// æ³¨å†Œ ConfigurationWarningsPostProcessor åˆ° Spring å®¹å™¨ä¸­</span></span><br><span class="line">	context.addBeanFactoryPostProcessor(<span class="keyword">new</span> ConfigurationWarningsPostProcessor(getChecks()));</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>æ³¨å†Œ ConfigurationWarningsPostProcessor åˆ° Spring å®¹å™¨ä¸­ã€‚å…³äº ConfigurationWarningsPostProcessor ç±»ï¼Œåœ¨ <a href="#">ã€Œ7.2 ConfigurationWarningsPostProcessorã€</a> ä¸­ï¼Œè¯¦ç»†è§£æã€‚</li>
<li><p>å…¶ä¸­ï¼Œ<code>#getChecks()</code> æ–¹æ³•ï¼Œè¿”å› Check æ•°ç»„ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ConfigurationWarningsApplicationContextInitializer.java</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span> Check[] getChecks() {</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> Check[] { <span class="keyword">new</span> ComponentScanPackageCheck() };</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>è¿”å›çš„æ•°ç»„ï¼Œåªæœ‰ä¸€ä¸ª ComponentScanPackageCheck å¯¹è±¡ã€‚</li>
</ul>
</li>
<li>Check ï¼Œæ˜¯ ConfigurationWarningsApplicationContextInitializer çš„å†…éƒ¨æ¥å£ï¼Œæ ¡éªŒå™¨ã€‚ä»£ç å¦‚ä¸‹ï¼š  <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ConfigurationWarningsApplicationContextInitializer.java</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">protected</span> <span class="class"><span class="keyword">interface</span> <span class="title">Check</span> </span>{</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Returns a warning if the check fails or {<span class="doctag">@code</span> null} if there are no problems.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> registry the {<span class="doctag">@link</span> BeanDefinitionRegistry}</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> a warning message or {<span class="doctag">@code</span> null}</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function">String <span class="title">getWarning</span><span class="params">(BeanDefinitionRegistry registry)</span></span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</li>
</ul>
<ul>
<li>çœ‹åˆ°æ­¤å¤„ï¼Œèƒ–å‹å¯èƒ½æœ‰ç‚¹æ‡µé€¼ï¼Œä¸ç€æ€¥ã€‚åœ¨ <a href="#">ã€Œ7.2 ConfigurationWarningsPostProcessorã€</a> ä¸­ï¼Œä¼šä¸²èµ·æ¥æ»´ã€‚</li>
</ul>
<h2 id="7-2-ConfigurationWarningsPostProcessor"><a href="#7-2-ConfigurationWarningsPostProcessor" class="headerlink" title="7.2 ConfigurationWarningsPostProcessor"></a>7.2 ConfigurationWarningsPostProcessor</h2><p>ConfigurationWarningsPostProcessor ï¼Œæ˜¯ ConfigurationWarningsApplicationContextInitializer çš„å†…éƒ¨é™æ€ç±»ï¼Œå®ç° PriorityOrderedã€BeanDefinitionRegistryPostProcessor æ¥å£ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ConfigurationWarningsPostProcessor#ConfigurationWarningsPostProcessor.java</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">ConfigurationWarningsPostProcessor</span></span></span><br><span class="line"><span class="class">        <span class="keyword">implements</span> <span class="title">PriorityOrdered</span>, <span class="title">BeanDefinitionRegistryPostProcessor</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Check æ•°ç»„</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Check[] checks;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ConfigurationWarningsPostProcessor</span><span class="params">(Check[] checks)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.checks = checks;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getOrder</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> Ordered.LOWEST_PRECEDENCE - <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postProcessBeanFactory</span><span class="params">(ConfigurableListableBeanFactory beanFactory)</span> <span class="keyword">throws</span> BeansException </span>{}</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postProcessBeanDefinitionRegistry</span><span class="params">(BeanDefinitionRegistry registry)</span> <span class="keyword">throws</span> BeansException </span>{</span><br><span class="line">        <span class="comment">// éå† Check æ•°ç»„ï¼Œæ‰§è¡Œæ ¡éªŒã€‚è‹¥æœ‰é”™ï¼Œåˆ™æ‰“å° warn æ—¥å¿—</span></span><br><span class="line">        <span class="keyword">for</span> (Check check : <span class="keyword">this</span>.checks) {</span><br><span class="line">            String message = check.getWarning(registry);</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.hasLength(message)) {</span><br><span class="line">                warn(message);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">warn</span><span class="params">(String message)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (logger.isWarnEnabled()) {</span><br><span class="line">            logger.warn(String.format(<span class="string">"%n%n** WARNING ** : %s%n%n"</span>, message));</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>æ ¸å¿ƒå°±æ˜¯ <code>#postProcessBeanDefinitionRegistry(BeanDefinitionRegistry registry)</code> æ–¹æ³•ã€‚åœ¨å…¶å†…éƒ¨ï¼Œéå† Check æ•°ç»„ï¼Œæ‰§è¡Œæ ¡éªŒã€‚è‹¥æœ‰é”™ï¼Œåˆ™æ‰“å° warn æ—¥å¿—ã€‚åœ¨ä¸Šæ–‡ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°ç›®å‰ <code>checks</code> åªæœ‰ä¸€ä¸ª ComponentScanPackageCheck å…ƒç´ ã€‚å…³äºå®ƒï¼Œæˆ‘ä»¬åœ¨ <a href="#">ã€Œ7.3 ComponentScanPackageCheckã€</a> è¯¦ç»†è§£æã€‚</li>
</ul>
<h2 id="7-3-ComponentScanPackageCheck"><a href="#7-3-ComponentScanPackageCheck" class="headerlink" title="7.3 ComponentScanPackageCheck"></a>7.3 ComponentScanPackageCheck</h2><p>ComponentScanPackageCheck ï¼Œå®ç° Check æ¥å£ï¼Œæ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº† <code>@ComponentScan</code> æ³¨è§£ï¼Œæ‰«æäº†æŒ‡å®šæ‰«æçš„åŒ…ã€‚</p>
<h3 id="7-3-1-æ„é€ æ–¹æ³•"><a href="#7-3-1-æ„é€ æ–¹æ³•" class="headerlink" title="7.3.1 æ„é€ æ–¹æ³•"></a>7.3.1 æ„é€ æ–¹æ³•</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ConfigurationWarningsPostProcessor#ComponentScanPackageCheck.java</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æœ‰é—®é¢˜çš„åŒ…çš„é›†åˆã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * å³ç¦æ­¢ä½¿ç”¨ <span class="doctag">@ComponentScan</span> æ³¨è§£æ‰«æè¿™ä¸ªé›†åˆä¸­çš„åŒ…</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Set&lt;String&gt; PROBLEM_PACKAGES;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> {</span><br><span class="line">    Set&lt;String&gt; packages = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    packages.add(<span class="string">"org.springframework"</span>);</span><br><span class="line">    packages.add(<span class="string">"org"</span>);</span><br><span class="line">    PROBLEM_PACKAGES = Collections.unmodifiableSet(packages);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>å³ç¦æ­¢æ‰«æ <code>"org.springframework"</code> å’Œ <code>"org"</code> åŒ…ã€‚å› ä¸º <code>"org.springframework"</code> åŒ…ä¸‹ï¼Œæœ‰éå¸¸å¤šçš„ Bean ï¼Œè¿™æ ·æ‰«æï¼Œä¼šé”™è¯¯çš„æ³¨å…¥å¾ˆå¤š Bean ã€‚</li>
</ul>
<h3 id="7-3-2-getWarning"><a href="#7-3-2-getWarning" class="headerlink" title="7.3.2 getWarning"></a>7.3.2 getWarning</h3><p>å®ç° <code>#getWarning(BeanDefinitionRegistry registry)</code> æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ConfigurationWarningsPostProcessor#ComponentScanPackageCheck.java</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getWarning</span><span class="params">(BeanDefinitionRegistry registry)</span> </span>{</span><br><span class="line">    <span class="comment">// &lt;1&gt; è·å¾—è¦æ‰«æçš„åŒ…</span></span><br><span class="line">    Set&lt;String&gt; scannedPackages = getComponentScanningPackages(registry);</span><br><span class="line">    <span class="comment">// &lt;2&gt; è·å¾—è¦æ‰«æçš„åŒ…ä¸­ï¼Œæœ‰é—®é¢˜çš„åŒ…</span></span><br><span class="line">    List&lt;String&gt; problematicPackages = getProblematicPackages(scannedPackages);</span><br><span class="line">    <span class="comment">// &lt;3.1&gt; å¦‚æœ problematicPackages ä¸ºç©ºï¼Œè¯´æ˜ä¸å­˜åœ¨é—®é¢˜</span></span><br><span class="line">    <span class="keyword">if</span> (problematicPackages.isEmpty()) {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// &lt;3.2&gt; å¦‚æœ problematicPackages éç©ºï¼Œè¯´æ˜æœ‰é—®é¢˜ï¼Œè¿”å›é”™è¯¯æç¤º</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Your ApplicationContext is unlikely to "</span></span><br><span class="line">            + <span class="string">"start due to a @ComponentScan of "</span></span><br><span class="line">            + StringUtils.collectionToDelimitedString(problematicPackages, <span class="string">", "</span>)</span><br><span class="line">            + <span class="string">"."</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li><p><code>&lt;1&gt;</code> å¤„ï¼Œè°ƒç”¨ <code>#getComponentScanningPackages(BeanDefinitionRegistry registry)</code> æ–¹æ³•ï¼Œè·å¾—è¦æ‰«æçš„åŒ…ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ConfigurationWarningsPostProcessor#ComponentScanPackageCheck.java</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">protected</span> Set&lt;String&gt; <span class="title">getComponentScanningPackages</span><span class="params">(BeanDefinitionRegistry registry)</span> </span>{</span><br><span class="line">    <span class="comment">// æ‰«æçš„åŒ…çš„é›†åˆ</span></span><br><span class="line">    Set&lt;String&gt; packages = <span class="keyword">new</span> LinkedHashSet&lt;&gt;();</span><br><span class="line">    <span class="comment">// è·å¾—æ‰€æœ‰ BeanDefinition çš„åå­—ä»¬</span></span><br><span class="line">    String[] names = registry.getBeanDefinitionNames();</span><br><span class="line">    <span class="keyword">for</span> (String name : names) {</span><br><span class="line">        <span class="comment">// å¦‚æœæ˜¯ AnnotatedBeanDefinition</span></span><br><span class="line">        BeanDefinition definition = registry.getBeanDefinition(name);</span><br><span class="line">        <span class="keyword">if</span> (definition <span class="keyword">instanceof</span> AnnotatedBeanDefinition) {</span><br><span class="line">            AnnotatedBeanDefinition annotatedDefinition = (AnnotatedBeanDefinition) definition;</span><br><span class="line">            <span class="comment">// å¦‚æœæœ‰ @ComponentScan æ³¨è§£ï¼Œåˆ™æ·»åŠ åˆ° packages ä¸­</span></span><br><span class="line">            addComponentScanningPackages(packages, annotatedDefinition.getMetadata());</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> packages;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addComponentScanningPackages</span><span class="params">(Set&lt;String&gt; packages, AnnotationMetadata metadata)</span> </span>{</span><br><span class="line">    <span class="comment">// è·å¾— @ComponentScan æ³¨è§£</span></span><br><span class="line">    AnnotationAttributes attributes = AnnotationAttributes.fromMap(metadata.getAnnotationAttributes(ComponentScan.class.getName(), <span class="keyword">true</span>));</span><br><span class="line">    <span class="comment">// å¦‚æœå­˜åœ¨ï¼Œåˆ™æ·»åŠ åˆ° packages ä¸­</span></span><br><span class="line">    <span class="keyword">if</span> (attributes != <span class="keyword">null</span>) {</span><br><span class="line">        addPackages(packages, attributes.getStringArray(<span class="string">"value"</span>));</span><br><span class="line">        addPackages(packages, attributes.getStringArray(<span class="string">"basePackages"</span>));</span><br><span class="line">        addClasses(packages, attributes.getStringArray(<span class="string">"basePackageClasses"</span>));</span><br><span class="line">        <span class="keyword">if</span> (packages.isEmpty()) {</span><br><span class="line">            packages.add(ClassUtils.getPackageName(metadata.getClassName()));</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addPackages</span><span class="params">(Set&lt;String&gt; packages, String[] values)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (values != <span class="keyword">null</span>) {</span><br><span class="line">        Collections.addAll(packages, values);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addClasses</span><span class="params">(Set&lt;String&gt; packages, String[] values)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (values != <span class="keyword">null</span>) {</span><br><span class="line">        <span class="keyword">for</span> (String value : values) {</span><br><span class="line">            packages.add(ClassUtils.getPackageName(value));</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>è™½ç„¶å¾ˆé•¿ï¼Œä½†æ˜¯æ¯”è¾ƒç®€å•ã€‚å°±æ˜¯æ‰¾ <code>@ComponentScan</code> æ³¨è§£æ‰€æ‰«æçš„åŒ…ã€‚</li>
</ul>
</li>
<li><p><code>&lt;2&gt;</code> å¤„ï¼Œè°ƒç”¨ <code>#getProblematicPackages(Set&lt;String&gt; scannedPackages)</code> æ–¹æ³•ï¼Œè·å¾—è¦æ‰«æçš„åŒ…ä¸­ï¼Œæœ‰é—®é¢˜çš„åŒ…ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ConfigurationWarningsPostProcessor#ComponentScanPackageCheck.java</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> List&lt;String&gt; <span class="title">getProblematicPackages</span><span class="params">(Set&lt;String&gt; scannedPackages)</span> </span>{</span><br><span class="line">    <span class="comment">// æœ‰é—®é¢˜çš„åŒ…çš„é›†åˆ</span></span><br><span class="line">    List&lt;String&gt; problematicPackages = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (String scannedPackage : scannedPackages) {</span><br><span class="line">        <span class="comment">// åˆ¤æ–­æ˜¯å¦åœ¨ PROBLEM_PACKAGES ä¸­ã€‚å¦‚æœæ˜¯ï¼Œåˆ™æ·»åŠ åˆ° problematicPackages ä¸­</span></span><br><span class="line">        <span class="keyword">if</span> (isProblematicPackage(scannedPackage)) {</span><br><span class="line">            problematicPackages.add(getDisplayName(scannedPackage));</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> problematicPackages;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isProblematicPackage</span><span class="params">(String scannedPackage)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (scannedPackage == <span class="keyword">null</span> || scannedPackage.isEmpty()) {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> PROBLEM_PACKAGES.contains(scannedPackage);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">getDisplayName</span><span class="params">(String scannedPackage)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (scannedPackage == <span class="keyword">null</span> || scannedPackage.isEmpty()) {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"the default package"</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"'"</span> + scannedPackage + <span class="string">"'"</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>ğŸ˜ˆ å°±æ˜¯åˆ¤æ–­ <code>scannedPackages</code> å“ªäº›åœ¨ <code>PROBLEM_PACKAGES</code> ä¸­ã€‚</li>
</ul>
</li>
<li><p><code>&lt;3.1&gt;</code> å¤„ï¼Œå¦‚æœ <code>problematicPackages</code> ä¸ºç©ºï¼Œè¯´æ˜ä¸å­˜åœ¨é—®é¢˜ã€‚</p>
</li>
<li><code>&lt;3.2&gt;</code> å¤„ï¼Œå¦‚æœ <code>problematicPackages</code> éç©ºï¼Œè¯´æ˜æœ‰é—®é¢˜ï¼Œè¿”å›é”™è¯¯æç¤ºã€‚</li>
</ul>
<h1 id="8-ServerPortInfoApplicationContextInitializer"><a href="#8-ServerPortInfoApplicationContextInitializer" class="headerlink" title="8. ServerPortInfoApplicationContextInitializer"></a>8. ServerPortInfoApplicationContextInitializer</h1><p><code>org.springframework.boot.web.context.ServerPortInfoApplicationContextInitializer</code> ï¼Œå®ç° ApplicationContextInitializerã€ApplicationListener æ¥å£ï¼Œç›‘å¬ EmbeddedServletContainerInitializedEvent ç±»å‹çš„äº‹ä»¶ï¼Œç„¶åå°†å†…åµŒçš„ Web æœåŠ¡å™¨ä½¿ç”¨çš„ç«¯å£ç»™è®¾ç½®åˆ° ApplicationContext ä¸­ã€‚</p>
<h2 id="8-1-initialize"><a href="#8-1-initialize" class="headerlink" title="8.1 initialize"></a>8.1 initialize</h2><p>å®ç° <code>#initialize(ConfigurableApplicationContext applicationContext)</code> æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ServerPortInfoApplicationContextInitializer.java</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initialize</span><span class="params">(ConfigurableApplicationContext applicationContext)</span> </span>{</span><br><span class="line">	applicationContext.addApplicationListener(<span class="keyword">this</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>å°†è‡ªèº«ä½œä¸ºä¸€ä¸ª ApplicationListener ç›‘å¬å™¨ï¼Œæ·»åŠ åˆ° Spring å®¹å™¨ä¸­ã€‚</li>
</ul>
<h2 id="8-2-onApplicationEvent"><a href="#8-2-onApplicationEvent" class="headerlink" title="8.2 onApplicationEvent"></a>8.2 onApplicationEvent</h2><p>å®ç° <code>#onApplicationEvent(WebServerInitializedEvent event)</code> æ–¹æ³•ï¼Œå½“ç›‘å¬åˆ° WebServerInitializedEvent äº‹ä»¶ï¼Œè¿›è¡Œè§¦å‘ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ServerPortInfoApplicationContextInitializer.java</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onApplicationEvent</span><span class="params">(WebServerInitializedEvent event)</span> </span>{</span><br><span class="line">    <span class="comment">// &lt;1&gt; è·å¾—å±æ€§å</span></span><br><span class="line">    String propertyName = <span class="string">"local."</span> + getName(event.getApplicationContext()) + <span class="string">".port"</span>;</span><br><span class="line">    <span class="comment">// &lt;2&gt; è®¾ç½®ç«¯å£åˆ° environment çš„ propertyName ä¸­</span></span><br><span class="line">    setPortProperty(event.getApplicationContext(), propertyName, event.getWebServer().getPort());</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li><p><code>&lt;1&gt;</code> å¤„ï¼Œè·å¾—å±æ€§åã€‚å…¶ä¸­ï¼Œ<code>#getName(WebServerApplicationContext context)</code> æ–¹æ³•ï¼Œè·å¾— WebServer çš„åå­—ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ServerPortInfoApplicationContextInitializer.java</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">getName</span><span class="params">(WebServerApplicationContext context)</span> </span>{</span><br><span class="line">	String name = context.getServerNamespace();</span><br><span class="line">	<span class="keyword">return</span> StringUtils.hasText(name) ? name : <span class="string">"server"</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p><code>&lt;2&gt;</code> å¤„ï¼Œè°ƒç”¨ <code>#setPortProperty(ApplicationContext context, String propertyName, int port)</code> æ–¹æ³•ï¼Œè®¾ç½®ç«¯å£åˆ° <code>environment</code> çš„ <code>propertyName</code> ä¸­ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ServerPortInfoApplicationContextInitializer.java</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setPortProperty</span><span class="params">(ApplicationContext context, String propertyName, <span class="keyword">int</span> port)</span> </span>{</span><br><span class="line">    <span class="comment">// è®¾ç½®ç«¯å£åˆ° environment çš„ propertyName ä¸­</span></span><br><span class="line">    <span class="keyword">if</span> (context <span class="keyword">instanceof</span> ConfigurableApplicationContext) {</span><br><span class="line">        setPortProperty(((ConfigurableApplicationContext) context).getEnvironment(), propertyName, port);</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// å¦‚æœæœ‰çˆ¶å®¹å™¨ï¼Œåˆ™ç»§ç»­è®¾ç½®</span></span><br><span class="line">    <span class="keyword">if</span> (context.getParent() != <span class="keyword">null</span>) {</span><br><span class="line">        setPortProperty(context.getParent(), propertyName, port);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setPortProperty</span><span class="params">(ConfigurableEnvironment environment, String propertyName, <span class="keyword">int</span> port)</span> </span>{</span><br><span class="line">    MutablePropertySources sources = environment.getPropertySources();</span><br><span class="line">    <span class="comment">// è·å¾— "server.ports" å±æ€§å¯¹åº”çš„å€¼</span></span><br><span class="line">    PropertySource&lt;?&gt; source = sources.get(<span class="string">"server.ports"</span>);</span><br><span class="line">    <span class="keyword">if</span> (source == <span class="keyword">null</span>) {</span><br><span class="line">        source = <span class="keyword">new</span> MapPropertySource(<span class="string">"server.ports"</span>, <span class="keyword">new</span> HashMap&lt;&gt;());</span><br><span class="line">        sources.addFirst(source);</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// æ·»åŠ åˆ° source ä¸­</span></span><br><span class="line">    ((Map&lt;String, Object&gt;) source.getSource()).put(propertyName, port);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>æ³¨æ„å™¢ï¼Œè®¾ç½®çš„å±æ€§ç»“æœæ˜¯ï¼Œ<code>"server.ports"</code> ä¸­ï¼Œçš„ KEY ä¸º <code>propertyName</code> ï¼ŒVALUE ä¸º <code>port</code> ã€‚ğŸ˜ˆ</li>
</ul>
</li>
</ul>
<h1 id="9-å…¶ä»–-ApplicationContextInitializer-å®ç°ç±»"><a href="#9-å…¶ä»–-ApplicationContextInitializer-å®ç°ç±»" class="headerlink" title="9. å…¶ä»– ApplicationContextInitializer å®ç°ç±»"></a>9. å…¶ä»– ApplicationContextInitializer å®ç°ç±»</h1><p>ApplicationContextInitializer è¿˜æœ‰ä¸€äº›å…¶å®ƒå®ç°ç±»ï¼Œä¸æ˜¯å¾ˆé‡è¦ï¼Œå¯ä»¥é€‰æ‹©ä¸çœ‹ã€‚</p>
<ul>
<li><code>spring-boot-test</code> æ¨¡å—<ul>
<li><code>org.springframework.boot.test.context.ConfigFileApplicationContextInitializer</code> ç±»</li>
<li><code>org.springframework.boot.test.context.SpringBootContextLoader</code> ä¸­çš„ ParentContextApplicationContextInitializer ç±»</li>
</ul>
</li>
<li><code>spring-boot-devtools</code> æ¨¡å—<ul>
<li><code>org.springframework.boot.devtools.restart.RestartScopeInitializer</code> ç±»</li>
</ul>
</li>
<li><code>spring-boot-autoconfigure</code> æ¨¡å—<ul>
<li><code>org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLoggingListener</code> ç±»</li>
</ul>
</li>
<li><code>spring-boot</code> æ¨¡å—<ul>
<li><code>org.springframework.boot.web.servlet.support.ServletContextApplicationContextInitializer</code> ç±»</li>
<li><code>org.springframework.boot.builder.ParentContextApplicationContextInitializer</code> ç±»</li>
</ul>
</li>
</ul>
<p>ğŸ˜ˆ è²Œä¼¼è¿˜æ˜¯è›®å¤šçš„ã€‚</p>
<h1 id="666-å½©è›‹"><a href="#666-å½©è›‹" class="headerlink" title="666. å½©è›‹"></a>666. å½©è›‹</h1><p>å°æ›´ä¸€ä¸‹ï¼Œç®—æ˜¯æ°´æ–‡~æ„Ÿè§‰æ¯”è¾ƒæœ‰æ”¶è·çš„ ApplicationContextInitializer çš„å®ç°ç±»æ˜¯ï¼š</p>
<ul>
<li><a href="#">ã€Œ6. ContextIdApplicationContextInitializerã€</a></li>
<li><a href="#">ã€Œ8. ServerPortInfoApplicationContextInitializerã€</a></li>
</ul>
<p>å‚è€ƒå’Œæ¨èå¦‚ä¸‹æ–‡ç« ï¼š</p>
<ul>
<li>dm_vincent <a href="https://blog.csdn.net/dm_vincent/article/details/77619780" rel="external nofollow noopener noreferrer" target="_blank">ã€Š[Spring Boot] 5. Spring Boot ä¸­çš„ApplicationContext - æ‰§è¡Œ ApplicationContextInitializer åˆå§‹åŒ–å™¨ã€‹</a></li>
</ul>




</div>